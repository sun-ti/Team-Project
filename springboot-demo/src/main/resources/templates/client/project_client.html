<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">

		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<link rel="stylesheet" href="layui/css/layui.css" media="all">

	</head>

	<body>
		<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">

		</fieldset>

		<div class="layui-row" style="width: 1000">

			<div class="demoTable">
				请输入客户类型：
				<div class="layui-inline">
					<input name="id" class="layui-input" id="demoReload" autocomplete="off">
				</div>
				<button class="layui-btn" data-type="reload">搜索</button>
			</div>
		</div>
		<table class="layui-hide" id="LAY_table_user" lay-filter="user"></table>

		<script src="layui/layui.js" charset="utf-8"></script>

		<script>
			layui.use(['table', 'carousel'], function() {
				var table = layui.table;
				var carousel = layui.carousel;
				//方法级渲染
				table.render({
					elem: '#LAY_table_user',
					url: '/demo/table/user/',
					cols: [
						[{
								checkbox: true,
								fixed: true
							}, {
								field: 'number',
								title: '序号',
								sort: true,
								width: 80
							}, {
								field: 'id',
								title: '客户类型',
								sort: true,
								fixed: true
							}, {
								field: 'name',
								title: '客户姓名'
							}, {
								field: 'tel',
								title: '客户电话'
							}, {
								field: 'times',
								title: '加油次数'
							}

						]
					],
					id: 'testReload',
					page: true,
					height: 310
				});

				var $ = layui.$,
					active = {
						reload: function() {
							var demoReload = $('#demoReload');

							//执行重载
							table.reload('testReload', {
								page: {
									curr: 1 //重新从第 1 页开始
								},
								where: {
									key: {
										id: demoReload.val()
									}
								}
							}, 'data');
						}
					};

				$('.demoTable .layui-btn').on('click', function() {
					var type = $(this).data('type');
					active[type] ? active[type].call(this) : '';
				});
				

			});
		</script>

	</body>

</html>