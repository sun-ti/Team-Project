<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../css/layui.css">

</head>
<div>
    <div class="layui-form" style="width: 1000">
        <div class="layui-form-item">
            <label class="layui-form-label">时间筛选</label>
            <div class="layui-input-inline">
                <select name="quiz1">
                    <option value="" selected="">请选择年份</option>
                    <option value="2015" >2015年</option>
                    <option value="2016" >2016年</option>
                    <option value="2017" >2017年</option>
                    <option value="2018" >2018年</option>
                    <option value="2019" >2019年</option>
                </select>
            </div>
            <div class="layui-input-inline">
                <select name="quiz2">
                    <option value="">请选择月份</option>
                    <option value="1">1月</option>
                    <option value="2">2月</option>
                    <option value="3">3月</option>
                    <option value="4">4月</option>
                    <option value="5">5月</option>
                    <option value="6">6月</option>
                    <option value="7">7月</option>
                    <option value="8">8月</option>
                    <option value="9">9月</option>
                    <option value="10">10月</option>
                    <option value="11">11月</option>
                    <option value="12">12月</option>
                </select>
            </div>
            <button class="layui-btn" data-type="reload" id="searchBtn">搜索</button>
        </div>

    </div>
    <div id="main" style="width: 900px;height:600px;"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.3.0/echarts.min.js"></script>
    <script src="../layui.js"></script>
    <script type="text/javascript" th:inline="none">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));
        var datajosn = "{\"msg\":\"OK\",\"code\":\"200\",\"data\":[{\"date\":\"2019-1\",\"in\":10},{\"date\":\"2019-2\",\"in\":15},{\"date\":\"2019-3\",\"in\":30},{\"date\":\"2019-4\",\"in\":20},{\"date\":\"2019-5\",\"in\":40},{\"date\":\"2019-6\",\"in\":80},{\"date\":\"2019-7\",\"in\":70},{\"date\":\"2019-8\",\"in\":90},{\"date\":\"2019-9\",\"in\":88},{\"date\":\"2019-10\",\"in\":100},{\"date\":\"2019-11\",\"in\":50},{\"date\":\"2019-12\",\"in\":30}],\"count\":12}"
        var data = JSON.parse(datajosn).data
        var xdata=[],data1=[]
        for(item of data){
            xdata.push(item.date)
            data1.push(item.in)
        }
        option = {
            title: {
                text: '客流量统计'
            },
            legend: {
                data: ['客流量'],
                align: 'left'
            },
            toolbox: {
                // y: 'bottom',
                feature: {
                    magicType: {
                        type: ['stack', 'tiled']
                    },
                    dataView: {},
                    saveAsImage: {
                        pixelRatio: 2
                    }
                }
            },
            tooltip: {},
            xAxis: {
                data: xdata,
                silent: false,
                splitLine: {
                    show: false
                }
            },
            yAxis: {
            },
            series: [{
                name: '客流量',
                type: 'bar',
                data: data1,
                animationDelay: function (idx) {
                    return idx * 10;
                }
            }],
            animationEasing: 'elasticOut',
            animationDelayUpdate: function (idx) {
                return idx * 5;
            }
        };



        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);

        layui.use('table', function () {
            // 搜索时重载
            var $ = layui.$, active = {
                reload: function () {
                    var searchValue = $('#searchValue');

                    //执行重载
                    table.reload('userTable', {
                        page: {
                            curr: 1 //重新从第 1 页开始
                        }
                        , where: {
                            username: searchValue.val()
                        }
                    }, 'data');
                }
            };
            // 搜索按钮响应
            $('#searchBtn').on('click', function () {
                console.log(111)


            });
        });

    </script>

</div>
</html>